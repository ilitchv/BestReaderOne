 <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Beast Reader</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="styles.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
        }
        .navbar-brand {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        .sidebar {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding-top: 60px;
            background-color: #343a40;
            width: 250px;
        }
        .sidebar a {
            color: #ffffff;
            padding: 15px 20px;
            display: block;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #495057;
            color: #ffffff;
        }
        .content {
            margin-left: 250px;
            padding: 20px;
        }
        .section-title {
            margin-bottom: 20px;
            font-weight: 700;
        }
        .card {
            margin-bottom: 20px;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            .content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar bg-dark">
        <a href="dashboard.html" class="text-center mb-4">
            <h2 class="navbar-brand text-white">Beast Reader</h2>
        </a>
        <a href="#winningNumbers" class="nav-link" data-bs-toggle="collapse"> 
            <i class="bi bi-trophy-fill me-2"></i> Winning Numbers
        </a>
        <a href="#games" class="nav-link" data-bs-toggle="collapse">
            <i class="bi bi-controller me-2"></i> Games
        </a>
        <a href="#prizes" class="nav-link" data-bs-toggle="collapse">
            <i class="bi bi-gift-fill me-2"></i> Prizes
        </a>
        <a href="#personalProfile" class="nav-link" data-bs-toggle="collapse">
            <i class="bi bi-person-circle me-2"></i> Personal Profile
        </a>
        <a href="#help" class="nav-link" data-bs-toggle="collapse">
            <i class="bi bi-question-circle-fill me-2"></i> Help
        </a>
        <a href="#luckyNumbers" class="nav-link" data-bs-toggle="collapse">
            <i class="bi bi-star-fill me-2"></i> Lucky Numbers
        </a>
        <a href="#" class="nav-link text-danger" onclick="logout()">
            <i class="bi bi-box-arrow-right me-2"></i> Logout
        </a>
    </div>

    <!-- Main Content -->
    <div class="content">
        <h1 class="section-title">Dashboard</h1>
        
        <!-- Winning Numbers Section -->
        <section id="winningNumbers">
            <h2 class="mb-4">Winning Numbers</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-trophy-fill me-2"></i> Agregar Números Ganadores
                </div>
                <div class="card-body">
                    <form id="winningNumbersForm">
                        <div class="mb-3">
                            <label for="lotteryName" class="form-label">Nombre de la Lotería</label>
                            <input type="text" class="form-control" id="lotteryName" placeholder="Ejemplo: Lotería Nacional" required>
                        </div>
                        <div class="mb-3">
                            <label for="winningNumber" class="form-label">Número Ganador</label>
                            <input type="text" class="form-control" id="winningNumber" placeholder="Ejemplo: 12345" required>
                        </div>
                        <div class="mb-3">
                            <label for="drawDate" class="form-label">Fecha del Sorteo</label>
                            <input type="date" class="form-control" id="drawDate" required>
                        </div>
                        <button type="submit" class="btn btn-success"><i class="bi bi-save me-2"></i>Guardar Número Ganador</button>
                    </form>
                </div>
            </div>
            <!-- Tabla de Números Ganadores -->
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-list-check me-2"></i> Lista de Números Ganadores
                </div>
                <div class="card-body">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Lotería</th>
                                <th>Número Ganador</th>
                                <th>Fecha del Sorteo</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="winningNumbersTable">
                            <!-- Filas de Números Ganadores se agregarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Games Section -->
        <section id="games">
            <h2 class="mb-4">Games</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-controller me-2"></i> Modalidades de Juego
                </div>
                <div class="card-body">
                    <div class="accordion" id="gamesAccordion">
                        <!-- Cada modalidad de juego puede ser un acordeón -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingGame1">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGame1" aria-expanded="false" aria-controls="collapseGame1">
                                    Straight
                                </button>
                            </h2>
                            <div id="collapseGame1" class="accordion-collapse collapse" aria-labelledby="headingGame1" data-bs-parent="#gamesAccordion">
                                <div class="accordion-body">
                                    <p>Descripción de la modalidad de juego Straight.</p>
                                    <!-- Puedes agregar más detalles o reglas aquí -->
                                </div>
                            </div>
                        </div>
                        <!-- Agrega más modalidades de juego según sea necesario -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingGame2">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGame2" aria-expanded="false" aria-controls="collapseGame2">
                                    Box
                                </button>
                            </h2>
                            <div id="collapseGame2" class="accordion-collapse collapse" aria-labelledby="headingGame2" data-bs-parent="#gamesAccordion">
                                <div class="accordion-body">
                                    <p>Descripción de la modalidad de juego Box.</p>
                                    <!-- Agrega más detalles o reglas aquí -->
                                </div>
                            </div>
                        </div>
                        <!-- Continúa agregando acordeones para otras modalidades -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Prizes Section -->
        <section id="prizes">
            <h2 class="mb-4">Prizes</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-gift-fill me-2"></i> Tabla de Premios
                </div>
                <div class="card-body">
                    <form id="prizesForm">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="gameType" class="form-label">Tipo de Juego</label>
                                <select class="form-select" id="gameType" required>
                                    <option value="" selected>Selecciona un tipo de juego</option>
                                    <option value="Straight">Straight</option>
                                    <option value="Box">Box</option>
                                    <option value="Combo">Combo</option>
                                    <!-- Agrega más tipos de juego según sea necesario -->
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="prizeAmount" class="form-label">Monto del Premio ($)</label>
                                <input type="number" class="form-control" id="prizeAmount" placeholder="Ejemplo: 1000" required>
                            </div>
                            <div class="col-md-4 d-flex align-items-end">
                                <button type="submit" class="btn btn-success"><i class="bi bi-save me-2"></i>Guardar Premio</button>
                            </div>
                        </div>
                    </form>
                    <!-- Tabla de Premios -->
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Tipo de Juego</th>
                                <th>Monto del Premio ($)</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="prizesTable">
                            <!-- Filas de Premios se agregarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Personal Profile Section -->
        <section id="personalProfile">
            <h2 class="mb-4">Personal Profile</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-person-circle me-2"></i> Perfil del Usuario
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <h5>Información Personal</h5>
                            <p><strong>Nombre:</strong> <span id="userName">Juan Pérez</span></p>
                            <p><strong>Email:</strong> <span id="userEmail">juan.perez@example.com</span></p>
                            <p><strong>Saldo Actual:</strong> $<span id="userBalance">500.00</span></p>
                        </div>
                        <div class="col-md-6">
                            <h5>Acciones</h5>
                            <button class="btn btn-primary mb-2" onclick="loadUserHistory()">
                                <i class="bi bi-clock-history me-2"></i> Ver Historial de Jugadas
                            </button>
                            <button class="btn btn-secondary mb-2" onclick="loadCurrentGames()">
                                <i class="bi bi-gear-fill me-2"></i> Juegos en Curso
                            </button>
                            <!-- Agrega más botones según sea necesario -->
                        </div>
                    </div>
                    <!-- Historial de Jugadas -->
                    <div id="userHistory" class="mb-4" style="display: none;">
                        <h5>Historial de Jugadas</h5>
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Número Apostado</th>
                                    <th>Tipo de Juego</th>
                                    <th>Fecha</th>
                                    <th>Resultado</th>
                                </tr>
                            </thead>
                            <tbody id="userHistoryTable">
                                <!-- Filas de Historial se agregarán dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Juegos en Curso -->
                    <div id="currentGames" class="mb-4" style="display: none;">
                        <h5>Juegos en Curso</h5>
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Número Apostado</th>
                                    <th>Tipo de Juego</th>
                                    <th>Fecha de Sorteo</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody id="currentGamesTable">
                                <!-- Filas de Juegos en Curso se agregarán dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Help Section -->
        <section id="help">
            <h2 class="mb-4">Help</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-question-circle-fill me-2"></i> Ayuda y Soporte
                </div>
                <div class="card-body">
                    <h5>¿Tienes problemas con el juego?</h5>
                    <p>Si sientes que tienes problemas de juego o ludopatía, es importante buscar ayuda profesional. Aquí tienes algunos recursos que pueden ayudarte:</p>
                    <ul>
                        <li><strong>Teléfono de Ayuda:</strong> 123-456-7890</li>
                        <li><strong>Organizaciones:</strong> <a href="https://www.institucion1.com" target="_blank">Institución 1</a>, <a href="https://www.institucion2.com" target="_blank">Institución 2</a></li>
                        <li><strong>Artículos Informativos:</strong> <a href="#" onclick="loadHelpArticle('identifying')">Identificando Problemas de Juego</a>, <a href="#" onclick="loadHelpArticle('managing')">Manejando el Juego Compulsivo</a></li>
                    </ul>
                    <!-- Sección para mostrar artículos de ayuda -->
                    <div id="helpArticle" class="mt-4" style="display: none;">
                        <h5 id="helpArticleTitle"></h5>
                        <p id="helpArticleContent"></p>
                        <button class="btn btn-secondary" onclick="hideHelpArticle()">Cerrar</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lucky Numbers Section -->
        <section id="luckyNumbers">
            <h2 class="mb-4">Lucky Numbers</h2>
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-star-fill me-2"></i> Números con Alta Probabilidad
                </div>
                <div class="card-body">
                    <form id="luckyNumbersForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="luckyNumbersCount" class="form-label">Cantidad de Números</label>
                                <input type="number" class="form-control" id="luckyNumbersCount" placeholder="Ejemplo: 5" min="1" max="10" required>
                            </div>
                            <div class="col-md-6 d-flex align-items-end">
                                <button type="submit" class="btn btn-success"><i class="bi bi-star-fill me-2"></i> Generar Números</button>
                            </div>
                        </div>
                    </form>
                    <!-- Lista de Números Generados -->
                    <div id="generatedNumbers" class="mb-4" style="display: none;">
                        <h5>Números Generados</h5>
                        <ul class="list-group">
                            <!-- Números generados se agregarán dinámicamente -->
                        </ul>
                        <button class="btn btn-primary mt-3" onclick="loadGeneratedNumbers()">Cargar en Simular Jugadas</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para Confirmar Acciones (Opcional) -->
    <div class="modal fade" id="actionModal" tabindex="-1" aria-labelledby="actionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="actionModalLabel" class="modal-title">Confirmar Acción</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <p id="actionModalBody">¿Estás seguro de que deseas realizar esta acción?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="confirmActionButton">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Librerías JavaScript -->
    <!-- jQuery (opcional, si lo usas en tus scripts) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- QRCode.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- Day.js -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <!-- Day.js Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/customParseFormat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/arraySupport.js"></script>
    <script>
        // Registrar plugins de Day.js
        dayjs.extend(dayjs_plugin_customParseFormat);
        dayjs.extend(dayjs_plugin_arraySupport);
    </script>
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <!-- Tu archivo JavaScript principal -->
    <script src="scripts.js"></script>
    <script>
        // Función para cerrar sesión
        function logout() {
            if (confirm('¿Estás seguro de que deseas cerrar sesión?')) {
                localStorage.removeItem('token');
                window.location.href = 'login.html';
            }
        }

        // Funciones para mostrar y ocultar secciones en Personal Profile
        function loadUserHistory() {
            document.getElementById('userHistory').style.display = 'block';
            document.getElementById('currentGames').style.display = 'none';
            // Aquí puedes agregar lógica para cargar datos dinámicamente
        }

        function loadCurrentGames() {
            document.getElementById('currentGames').style.display = 'block';
            document.getElementById('userHistory').style.display = 'none';
            // Aquí puedes agregar lógica para cargar datos dinámicamente
        }

        // Funciones para la sección Help
        function loadHelpArticle(type) {
            const title = document.getElementById('helpArticleTitle');
            const content = document.getElementById('helpArticleContent');
            if (type === 'identifying') {
                title.innerText = 'Identificando Problemas de Juego';
                content.innerText = 'Contenido sobre cómo identificar problemas de juego...';
            } else if (type === 'managing') {
                title.innerText = 'Manejando el Juego Compulsivo';
                content.innerText = 'Contenido sobre cómo manejar el juego compulsivo...';
            }
            document.getElementById('helpArticle').style.display = 'block';
        }

        function hideHelpArticle() {
            document.getElementById('helpArticle').style.display = 'none';
        }

        // Funciones para la sección Lucky Numbers
        document.getElementById('luckyNumbersForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const count = document.getElementById('luckyNumbersCount').value;
            generateLuckyNumbers(count);
        });

        function generateLuckyNumbers(count) {
            const numbers = [];
            for (let i = 0; i < count; i++) {
                const num = Math.floor(Math.random() * 100000) + 1; // Genera números entre 1 y 100000
                numbers.push(num);
            }
            displayLuckyNumbers(numbers);
        }

        function displayLuckyNumbers(numbers) {
            const list = document.querySelector('#generatedNumbers ul');
            list.innerHTML = '';
            numbers.forEach(num => {
                const listItem = document.createElement('li');
                listItem.classList.add('list-group-item');
                listItem.innerText = num;
                list.appendChild(listItem);
            });
            document.getElementById('generatedNumbers').style.display = 'block';
        }

        function loadGeneratedNumbers() {
            const listItems = document.querySelectorAll('#generatedNumbers ul li');
            listItems.forEach(item => {
                // Aquí puedes implementar la lógica para cargar estos números en index.html
                // Por ejemplo, usar localStorage o enviar una petición al backend
                // A continuación, un ejemplo usando localStorage:
                const number = item.innerText;
                // Suponiendo que index.html tiene una función para agregar jugadas desde localStorage
                // Aquí solo almacenamos los números generados
                let savedNumbers = JSON.parse(localStorage.getItem('generatedNumbers')) || [];
                savedNumbers.push(number);
                localStorage.setItem('generatedNumbers', JSON.stringify(savedNumbers));
            });
            alert('Los números generados han sido cargados en Simular Jugadas.');
        }

        // Ejemplo de manejo de formularios y tablas (puedes expandir esto según tus necesidades)
        document.getElementById('winningNumbersForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const lotteryName = document.getElementById('lotteryName').value;
            const winningNumber = document.getElementById('winningNumber').value;
            const drawDate = document.getElementById('drawDate').value;
            addWinningNumber(lotteryName, winningNumber, drawDate);
        });

        function addWinningNumber(name, number, date) {
            const table = document.getElementById('winningNumbersTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td>${table.rows.length}</td>
                <td>${name}</td>
                <td>${number}</td>
                <td>${date}</td>
                <td>
                    <button class="btn btn-danger btn-sm" onclick="deleteWinningNumber(this)">Eliminar</button>
                </td>
            `;
            // Limpiar el formulario
            document.getElementById('winningNumbersForm').reset();
        }

        function deleteWinningNumber(button) {
            if (confirm('¿Estás seguro de que deseas eliminar este número ganador?')) {
                const row = button.parentElement.parentElement;
                row.remove();
                // Actualizar los índices de la tabla
                const table = document.getElementById('winningNumbersTable');
                for (let i = 0; i < table.rows.length; i++) {
                    table.rows[i].cells[0].innerText = i + 1;
                }
            }
        }

        document.getElementById('prizesForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const gameType = document.getElementById('gameType').value;
            const prizeAmount = document.getElementById('prizeAmount').value;
            addPrize(gameType, prizeAmount);
        });

        function addPrize(gameType, amount) {
            const table = document.getElementById('prizesTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td>${table.rows.length}</td>
                <td>${gameType}</td>
                <td>${amount}</td>
                <td>
                    <button class="btn btn-danger btn-sm" onclick="deletePrize(this)">Eliminar</button>
                </td>
            `;
            // Limpiar el formulario
            document.getElementById('prizesForm').reset();
        }

        function deletePrize(button) {
            if (confirm('¿Estás seguro de que deseas eliminar este premio?')) {
                const row = button.parentElement.parentElement;
                row.remove();
                // Actualizar los índices de la tabla
                const table = document.getElementById('prizesTable');
                for (let i = 0; i < table.rows.length; i++) {
                    table.rows[i].cells[0].innerText = i + 1;
                }
            }
        }
    </script>
</body>
</html>
