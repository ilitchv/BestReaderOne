# We'll create a JS patch file br_patch_v8_3_1.js that can be included or pasted into user's HTML.
# The patch focuses on:
# - Adding a "Refresh from OCR" button that copies the exact preview table values into the Admin Results table and auto-saves each row.
# - Allowing OCR text paste and CSV import (within OCR tab) by capturing the preview table as a snapshot saved to localStorage `br_ocr_preview_v1`.
# - Robust alias mapping to match OCR rows to results rows.
# - Guarding history edits behind admin PIN 1983 using sessionStorage 'br_is_admin'.
# - Non-invasive: only appends new elements and does not modify existing CSS/theme/layout.

patch_js = r"""
/* Beast Reader — Patch v8.3.1 (safe, non-invasive)
   - Restores previous behavior (no admin autoload, no theme changes).
   - Adds "Refresh from OCR" (Results tab) that copies EXACT preview values to all rows and auto-saves.
   - Adds CSV import + text paste capture within OCR tab (uses existing preview table).
   - Requires Admin PIN for history edits (sessionStorage 'br_is_admin' == '1').
   This file is safe to append at the end of your current HTML, after the main app scripts.
*/

(function () {
  const PIN_CODE = '1983';
  const LS_OCR_PREVIEW = 'br_ocr_preview_v1';

  // ---------- Utilities
  const $ = (sel, ctx=document) => ctx.querySelector(sel);
  const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
  const txt = (el) => (el ? (el.textContent || '').trim() : '');
  const norm = (s='') => s
      .toString()
      .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
      .replace(/[.,]/g,'')
      .replace(/\s+/g,' ').trim().toUpperCase();
  const isAdmin = () => sessionStorage.getItem('br_is_admin') === '1';
  const ensureAdmin = () => {
    if (isAdmin()) return true;
    const pin = prompt('Introduce PIN de administrador:');
    if (pin && pin.trim() === PIN_CODE) {
      sessionStorage.setItem('br_is_admin','1');
      alert('Sesión de administrador activa.');
      return true;
    }
    alert('Acción cancelada. Se requiere PIN de administrador.');
    return false;
  };

  // ---------- Draw & lottery aliasing
  // Draw slugs used in admin tables
  const DRAW_EQ = {
    'MIDDAY': ['MIDDAY','MEDIODIA','MEDIODÍA','AM','DAY'],
    'EVENING': ['EVENING','PM','TARDE','EVE'],
    'NIGHT': ['NIGHT','NOCHE'],
    'DAY': ['DAY','DIA','DÍA','AM'], // CT/PA/VA have "Day" in UI
    'AM': ['AM','A M'],
    'PM': ['PM','P M'],
    'MAIN': ['MAIN','R1','R2','R3'], // for special, will refine below
    'R1': ['R1','R-1','1'],
    'R2': ['R2','R-2','2'],
    'R3': ['R3','R-3','3'],
  };

  function matchDraw(label) {
    const n = norm(label);
    for (const k of Object.keys(DRAW_EQ)) {
      for (const v of DRAW_EQ[k]) {
        if (n === norm(v)) return k;
      }
    }
    // Fallback includes partials
    if (/\bMID/i.test(n)) return 'MIDDAY';
    if (/\bNOCH|NIGHT\b/i.test(n)) return 'NIGHT';
    if (/\bEVE|TARDE|PM\b/i.test(n)) return 'EVENING';
    if (/\bDAY|DIA\b/i.test(n)) return 'DAY';
    return n;
  }

  // Abbreviation mapping from OCR "Abbrev." or short forms to canonical (lottery, draw) label pair,
  // tuned with the examples you've provided.
  const ABBR_MAP = {
    'MIDDAY': {lottery: 'NEW YORK', draw: 'MIDDAY'},
    'NYS': {lottery: 'NEW YORK', draw: 'NIGHT'},
    'NY': {lottery: 'NY HORSES', draw: 'R1'}, // default; OCR row may specify R1/R2/R3 on map
    'STATE': {lottery: 'NEW YORK', draw: 'STATE'}, // Many times used for New York Pick 4 "State" (we'll match via alias below)
    'BK-DAY': {lottery: 'NY-BK', draw: 'AM'},
    'BK-TV': {lottery: 'NY-BK', draw: 'PM'},
    'NY-BK AM': {lottery: 'NY-BK', draw: 'AM'},
    'NY-BK PM': {lottery: 'NY-BK', draw: 'PM'},
    'NJ-DAY': {lottery: 'NEW JERSEY', draw: 'MIDDAY'},
    'NJ-NIGHT': {lottery: 'NEW JERSEY', draw: 'EVENING'},
    'CONN-DAY': {lottery: 'CONNECTICUT', draw: 'DAY'},
    'CONN-NIGHT': {lottery: 'CONNECTICUT', draw: 'NIGHT'},
    'CT AM': {lottery: 'CONNECTICUT', draw: 'DAY'},
    'CT PM': {lottery: 'CONNECTICUT', draw: 'NIGHT'},
    'FLA-MIDDAY': {lottery: 'FLORIDA', draw: 'MIDDAY'},
    'FLA-NIGHT': {lottery: 'FLORIDA', draw: 'EVENING'},
    'GEORGIA AM': {lottery: 'GEORGIA', draw: 'MIDDAY'},
    'GEORGIA EVE': {lottery: 'GEORGIA', draw: 'EVENING'},
    'GEORGIA PM': {lottery: 'GEORGIA', draw: 'EVENING'},
    'GEORGIA NIGHT': {lottery: 'GEORGIA', draw: 'NIGHT'},
    'PA AM': {lottery: 'PENNSYLVANIA', draw: 'DAY'},
    'PA PM': {lottery: 'PENNSYLVANIA', draw: 'EVENING'},
    'PENNSYLV AM': {lottery: 'PENNSYLVANIA', draw: 'DAY'},
    'PENNSYLV PM': {lottery: 'PENNSYLVANIA', draw: 'EVENING'},
    'BK PAPER': {lottery: 'BK PAPER', draw: 'MAIN'},
    '3.5.7': {lottery: '3-5-7', draw: 'MAIN'},
    '357': {lottery: '3-5-7', draw: 'MAIN'},
    'FL PICK2 AM': {lottery: 'FL PICK 2', draw: 'AM'},
    'FL PICK2 PM': {lottery: 'FL PICK 2', draw: 'PM'},
    'FL PICK 2 AM': {lottery: 'FL PICK 2', draw: 'AM'},
    'FL PICK 2 PM': {lottery: 'FL PICK 2', draw: 'PM'},
    // RD / Special common
    'LOTEDOM': {lottery: 'LOTEDOM', draw: 'TARDE'},
    'LOTEKA': {lottery: 'LOTEKA', draw: 'NOCHE'},
    'REAL': {lottery: 'LOTERIA REAL', draw: 'MEDIODIA'},
    'GANAMAS': {lottery: 'GANA MAS', draw: 'TARDE'},
    'QUINIELA PALE': {lottery: 'QUINIELA PALE', draw: 'DIARIO'},
    'LA PRIMERA': {lottery: 'LA PRIMERA', draw: 'AM'},
    'LA PRIMERA NOCHE': {lottery: 'LA PRIMERA', draw: 'PM'},
    'LA SUERTE': {lottery: 'LA SUERTE DOMINICANA', draw: 'AM'},
    'LA SUERTE PM': {lottery: 'LA SUERTE DOMINICANA', draw: 'PM'},
    'NY-BP AM': {lottery: 'NY-BP', draw: 'AM'},
    'NY-BP PM': {lottery: 'NY-BP', draw: 'PM'},
    'NY-FP AM': {lottery: 'NY-FP', draw: 'AM'},
    'NY-FP PM': {lottery: 'NY-FP', draw: 'PM'},
    'KING LOTTERY AM': {lottery: 'KING LOTTERY', draw: 'AM'},
    'KING LOTTERY PM': {lottery: 'KING LOTTERY', draw: 'PM'},
    'EXTRA MIDDAY': {lottery: 'EXTRA', draw: 'MIDDAY'},
    'EXTRA NIGHT': {lottery: 'EXTRA', draw: 'NIGHT'},
    'ANGUILLA 10AM': {lottery: 'ANGUILLA', draw: '10AM'},
    'ANGUILLA 1PM': {lottery: 'ANGUILLA', draw: '1PM'},
    'ANGUILLA 6PM': {lottery: 'ANGUILLA', draw: '6PM'},
    'ANGUILLA 9PM': {lottery: 'ANGUILLA', draw: '9PM'}
  };

  const NAME_ALIAS = {
    'NEW YORK': ['NEW YORK','NY','N.Y.'],
    'NEW JERSEY': ['NEW JERSEY','NJ','N.J.'],
    'CONNECTICUT': ['CONNECTICUT','CT','CONN'],
    'PENNSYLVANIA': ['PENNSYLVANIA','PA','PENNSYLV'],
    'FLORIDA': ['FLORIDA','FL','FLA'],
    'GEORGIA': ['GEORGIA','GA'],
    'MASSACHUSETTS': ['MASSACHUSETTS','MA'],
    'MARYLAND': ['MARYLAND','MD'],
    'MICHIGAN': ['MICHIGAN','MI'],
    'VIRGINIA': ['VIRGINIA','VA'],
    'NORTH CAROLINA': ['NORTH CAROLINA','NC'],
    'SOUTH CAROLINA': ['SOUTH CAROLINA','SC'],
    'TEXAS': ['TEXAS','TX'],
    // RD
    'GANA MAS': ['GANA MAS','GANAMAS','GANA MAS RD'],
    'LOTERIA REAL': ['LOTERIA REAL','REAL'],
    'LOTEKA': ['LOTEKA'],
    'LOTEDOM': ['LOTEDOM','LOTE DOM'],
    'LA PRIMERA': ['LA PRIMERA'],
    'LA SUERTE DOMINICANA': ['LA SUERTE','LA SUERTE DOMINICANA'],
    'QUINIELA PALE': ['QUINIELA PALE','QUINIELA PALE (LEIDSA)','QUINIELA PALE LEIDSA'],
    // Special
    'NY-BK': ['NY-BK','BK','BROOKLYN'],
    'NY-BP': ['NY-BP','BP'],
    'NY-FP': ['NY-FP','FP'],
    'NY HORSES': ['NY HORSES','NEW YORK HORSES','HORSES','NY RACE'],
    'KING LOTTERY': ['KING LOTTERY','KING'],
    'EXTRA': ['EXTRA'],
    'ANGUILLA': ['ANGUILLA'],
    '3-5-7': ['3-5-7','357','3.5.7'],
    'BK PAPER': ['BK PAPER','BKPAPER','BK PAPER MAIN'],
    'FL PICK 2': ['FL PICK 2','FL PICK2','FL PICK TWO']
  };

  function canonicalName(input) {
    const n = norm(input);
    for (const [key, arr] of Object.entries(NAME_ALIAS)) {
      if (arr.some(alias => n === norm(alias))) return key;
    }
    return n;
  }

  function keyJoin(lottery, draw) {
    return `${canonicalName(lottery)}|${matchDraw(draw)}`;
  }

  // Build mapping from OCR preview
  function loadOCRPreview() {
    try {
      const raw = localStorage.getItem(LS_OCR_PREVIEW);
      if (raw) {
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed.rows)) return parsed;
        if (Array.isArray(parsed)) return {rows: parsed};
      }
    } catch (e) {}
    // Fallback: scrape preview table if present
    const previewTable = detectOCRPreviewTable();
    if (previewTable) {
      const rows = [];
      const trs = $$('tbody tr', previewTable);
      trs.forEach(tr => {
        const tds = $$('td', tr);
        const abbr = txt(tds[0])
        const map = txt(tds[1])
        const value = txt(tds[3]) || (tds[3] && tds[3].querySelector('input') ? tds[3].querySelector('input').value.trim() : '');
        rows.push({abbr, map, value});
      });
      const snapshot = {rows, capturedAt: Date.now(), source: 'scrape'};
      localStorage.setItem(LS_OCR_PREVIEW, JSON.stringify(snapshot));
      return snapshot;
    }
    return {rows: []};
  }

  function detectOCRPreviewTable() {
    // Try to find the preview table by header names
    const tables = $$('table');
    for (const tb of tables) {
      const headerText = norm(tb.innerText.slice(0, 200));
      if (/\bABBREV\b/.test(headerText) && /\bDETECTED\b/.test(headerText) && /\bVALUE\b/.test(headerText)) {
        return tb;
      }
    }
    return null;
  }

  function rowToKey(row) {
    // priority: explicit map (e.g., "usa/ny/Midday")
    if (row.map && row.map.includes('/')) {
      const parts = row.map.split('/').map(s => s.trim());
      // try to deduce lottery + draw
      let lottery = parts[1] || '';
      let draw = parts[2] || '';
      // Special handling
      if (/ny-bk|ny-bp|ny-fp/i.test(row.map)) {
        lottery = row.map.match(/ny-(bk|bp|fp)/i)[0].toUpperCase();
      }
      if (/horses|race/i.test(row.map)) {
        lottery = 'NY HORSES';
      }
      return keyJoin(lottery, draw);
    }
    // Use abbr mapping
    if (row.abbr) {
      const ab = norm(row.abbr);
      if (ABBR_MAP[ab]) {
        const m = ABBR_MAP[ab];
        return keyJoin(m.lottery, m.draw);
      }
      // Try raw split like "GEORGIA PM"
      const m2 = ab.match(/^(.*?)\s+(AM|PM|MIDDAY|EVE|EVENING|NIGHT|DAY)$/i);
      if (m2) {
        return keyJoin(m2[1], m2[2]);
      }
    }
    // last hope: lottery/draw present
    if (row.lottery && row.draw) {
      return keyJoin(row.lottery, row.draw);
    }
    return null;
  }

  function buildPreviewMap() {
    const snap = loadOCRPreview();
    const map = new Map();
    (snap.rows || []).forEach(row => {
      const key = rowToKey(row);
      const val = (row.value || '').trim();
      if (key && val) map.set(key, val);
    });
    return map;
  }

  // ---------- Results table integration
  function findAdminResultsTables() {
    // Identify the admin "Resultados" tables by section titles
    const sections = [];
    $$('h2,h3,h4').forEach(h => {
      const n = norm(h.textContent || '');
      if (/\bUSA LOTTERIES\b|\bSANTO DOMINGO LOTTERIES\b|\bSPECIAL LOTTERIES\b/.test(n)) {
        // next table sibling
        let sib = h.nextElementSibling;
        while (sib && sib.tagName !== 'TABLE') sib = sib.nextElementSibling;
        if (sib && sib.tagName === 'TABLE') sections.push({title: n, table: sib});
      }
    });
    // Fallback: grab all tables that look like admin rows (6 columns + Save button)
    if (!sections.length) {
      $$('table').forEach(tb => {
        const hasSave = tb.innerText.includes('Save');
        if (hasSave) sections.push({title: 'UNKNOWN', table: tb});
      });
    }
    return sections;
  }

  function refreshFromOCR() {
    const previewMap = buildPreviewMap();
    if (!previewMap.size) {
      alert('No hay previsualización OCR guardada. Ve al tab OCR, previsualiza y guarda antes de refrescar.');
      return;
    }
    const sections = findAdminResultsTables();
    let applied = 0;
    sections.forEach(({table}) => {
      const rows = $$('tbody tr', table);
      rows.forEach(tr => {
        const tds = $$('td', tr);
        if (tds.length < 6) return;
        const lot = txt(tds[0]);
        const draw = txt(tds[1]);
        const key = keyJoin(lot, draw);
        const input = $('input,textarea', tds[4]);
        const saveBtn = $('button', tds[5]);
        const newVal = previewMap.get(key);
        if (newVal && input) {
          input.value = newVal;
          input.dispatchEvent(new Event('input', {bubbles:true}));
          applied++;
          // auto-save if button exists
          if (saveBtn) {
            setTimeout(()=>{
              try { saveBtn.click(); } catch(e){}
            }, 10);
          }
        }
      });
    });
    alert(`Refresh from OCR: ${applied} resultados aplicados y guardados.`);
  }

  // ---------- Buttons injection (non-invasive)
  function installRefreshButton() {
    // Find "Reset results" button and place ours next to it
    const allBtns = $$('button');
    let resetBtn = null;
    for (const b of allBtns) {
      if (/reset results/i.test(b.textContent || '')) { resetBtn = b; break; }
      if (/reset\s+results/i.test((b.getAttribute('aria-label')||''))) { resetBtn = b; break; }
    }
    if (!resetBtn || $('#br-refresh-ocr-btn')) return; // already installed or not found
    const btn = document.createElement('button');
    btn.id = 'br-refresh-ocr-btn';
    btn.className = resetBtn.className; // inherit styling
    btn.style.marginLeft = '12px';
    btn.textContent = 'Refresh from OCR';
    btn.addEventListener('click', () => {
      if (!ensureAdmin()) return;
      refreshFromOCR();
    });
    resetBtn.parentElement.insertBefore(btn, resetBtn.nextSibling);
  }

  // ---------- OCR: CSV import and text capture helpers
  function csvToRows(csv) {
    // very light CSV parser (expects comma-separated, no quotes inside values)
    const lines = csv.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
    if (!lines.length) return [];
    const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
    const rows = [];
    for (let i=1;i<lines.length;i++){
      const cols = lines[i].split(',').map(c=>c.trim());
      const obj = {};
      headers.forEach((h,idx)=> obj[h] = cols[idx] || '');
      // normalize to our structure
      rows.push({
        abbr: obj.abbrev || obj.abbreviation || obj.abbr || obj.loteria || '',
        map: obj.map || obj.catalogkey || '',
        value: (obj.value || obj.result || '').trim(),
        lottery: obj.lottery || obj.loteria || '',
        draw: obj.draw || obj.sorteo || ''
      });
    }
    return rows;
  }

  function installCSVandTextCapture() {
    // Find OCR tab container and preview controls
    // We insert a small "Import CSV" button near where "Previsualizar" lives.
    const ocrButtons = $$('button');
    let anchor = null;
    for (const b of ocrButtons) {
      if (/previsualizar/i.test(b.textContent||'')) { anchor = b; break; }
    }
    if (!anchor || $('#br-import-csv-btn')) return;

    // CSV button
    const up = document.createElement('input');
    up.type = 'file';
    up.accept = '.csv,text/csv';
    up.style.display = 'none';

    const btn = document.createElement('button');
    btn.id = 'br-import-csv-btn';
    btn.className = anchor.className;
    btn.style.marginLeft = '12px';
    btn.textContent = 'Importar CSV';

    btn.addEventListener('click', ()=> up.click());
    up.addEventListener('change', (e)=>{
      const file = e.target.files && e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        const rows = csvToRows(reader.result || '');
        const snapshot = {rows, capturedAt: Date.now(), source: 'csv'};
        localStorage.setItem(LS_OCR_PREVIEW, JSON.stringify(snapshot));
        alert(`CSV importado: ${rows.length} filas. Ve a "Refresh from OCR" para aplicarlo.`);
      };
      reader.readAsText(file);
    });

    anchor.parentElement.insertBefore(btn, anchor.nextSibling);
    document.body.appendChild(up);

    // Textarea capture fallback — if there's a visible preview table, we already scrape on refresh.
    // If there's a textarea with id/name containing 'ocr' or 'texto', add a "Guardar preview" helper.
    const ta = $('textarea[id*="ocr"], textarea[name*="ocr"], textarea[id*="texto"], textarea[name*="texto"]');
    if (ta && !$('#br-save-preview-btn')) {
      const sbtn = document.createElement('button');
      sbtn.id = 'br-save-preview-btn';
      sbtn.className = anchor.className;
      sbtn.style.marginLeft = '12px';
      sbtn.textContent = 'Guardar preview (texto)';
      sbtn.addEventListener('click', ()=>{
        // Try to parse simple lines: "NAME ... pick formats"
        const lines = (ta.value||'').split(/\r?\n/).map(l=>l.trim()).filter(Boolean);
        const rows = lines.map(line=>({ abbr: line.split(/\s+/)[0] || '', map:'', value: line.replace(/^[^A-Za-z0-9]+/,'') }));
        const snapshot = {rows, capturedAt: Date.now(), source: 'text'};
        localStorage.setItem(LS_OCR_PREVIEW, JSON.stringify(snapshot));
        alert(`Texto guardado como previsualización (${rows.length} filas).`);
      });
      anchor.parentElement.insertBefore(sbtn, btn.nextSibling);
    }
  }

  // ---------- History Edit guard
  function guardHistoryEdits() {
    document.addEventListener('click', function(e){
      const el = e.target;
      if (!el) return;
      // Buttons that could edit/delete within history modal
      const label = (el.textContent||'').trim().toLowerCase();
      const isEditLike = /editar|edit|borrar|eliminar|guardar cambios|save/i.test(label);
      const inHistoryModal = (el.closest && el.closest('.history, #history, [data-history], .modal')) &&
                              /historial|history/i.test((el.closest('.modal')||el.closest('[data-history]')||{textContent:''}).textContent||'');
      if (isEditLike && inHistoryModal) {
        if (!ensureAdmin()) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
      }
    }, true);
  }

  // ---------- Ensure Admin not auto-opened
  function disableAdminAutoload() {
    // Common patterns that sometimes auto-open admin
    const openAdmin = window.openAdminPanel || window.openAdmin || null;
    if (openAdmin) {
      // No-op wrapper to ensure it is only called on demand
      window.openAdminPanel = function(){ if (ensureAdmin()) return openAdmin.apply(this, arguments); };
      window.openAdmin = window.openAdminPanel;
    }
    // Hide admin by default if some CSS left it open
    const adminPanel = $('#admin, #adminPanel, .admin-panel');
    if (adminPanel) {
      adminPanel.style.display = 'none';
    }
  }

  // ---------- Init
  function initPatch() {
    try {
      installRefreshButton();
      installCSVandTextCapture();
      guardHistoryEdits();
      disableAdminAutoload();
      // Do not alter theme/scroll/anything else
    } catch (e) {
      console.warn('Patch init error', e);
    }
  }

  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    setTimeout(initPatch, 50);
  } else {
    document.addEventListener('DOMContentLoaded', initPatch);
  }

})();
"""
with open('/mnt/data/br_patch_v8_3_1.js','w',encoding='utf-8') as f:
    f.write(patch_js)

readme = """
Beast Reader — Patch v8.3.1 (Drop-in)
=====================================

Qué resuelve
------------
1) "Refresh from OCR" copia **exactamente** lo que ves en la tabla de previsualización del OCR
   hacia la tabla de Resultados (Admin) y auto-guarda cada fila.
2) Permite **Importar CSV** y **Guardar preview desde texto** en el tab OCR (sin tocar layout).
3) Protege la **edición del historial** con el PIN 1983 (sólo edición/eliminación).
4) Evita que el Admin se abra solo al cargar (y oculta el panel por defecto).

Cómo instalar
-------------
1. No borres nada de tu HTML actual. Añade, justo ANTES de `</body>`, esta línea:
   <script src="br_patch_v8_3_1.js"></script>

   (O pega el contenido del archivo `br_patch_v8_3_1.js` dentro de un <script> al final del body).

2. Guarda y recarga.

Uso
---
- En OCR: previsualiza como siempre. Opcionalmente, usa **Importar CSV** o **Guardar preview (texto)**.
- En Resultados (Admin): pulsa **Refresh from OCR** (al lado de "Reset results").
  Se aplicarán los textos tal cual al campo "Resultado" y se pulsará "Save" por cada fila encontrada.

Notas
-----
- El patch es **no-invasivo**: no cambia tu tema, ni el grid del tablero ni posiciones de botones.
- Si no encuentra una previsualización en localStorage, intenta **scrapear la tabla** de OCR visible.
- Si algún row no se aplica, revisa alias/mapeos del OCR ("Abbrev." o "Map") para acercarlos a catálogo.

Soporte a nuevas loterías
-------------------------
- Añadidos alias para **BK Paper**, **FL Pick 2 (AM/PM)**, **NY Horses (R1/R2/R3)**, **3-5-7**.
- Estos no se muestran por defecto si tu UI los mantiene ocultos; sólo ayudan al mapeo desde OCR.

Seguridad
---------
- Para editar o borrar entradas en el modal de historial, se pide el **PIN 1983**.
- La sesión admin vive en `sessionStorage` (se pierde al cerrar la pestaña).

Rollback
--------
- Basta con quitar la línea <script src="br_patch_v8_3_1.js"></script> para desinstalar el patch.
"""
with open('/mnt/data/README_patch_v8_3_1.txt','w',encoding='utf-8') as f:
    f.write(readme)

print("Created files:", "/mnt/data/br_patch_v8_3_1.js", "/mnt/data/README_patch_v8_3_1.txt")
